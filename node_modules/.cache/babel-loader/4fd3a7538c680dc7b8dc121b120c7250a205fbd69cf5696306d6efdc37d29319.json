{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Pagination,Select,Input}from'antd';// Example UI components\nimport{deleteFile,downloadFile,getCameraList,getPresignedUrl,getVideoList,listFiles,uploadFile}from'../utils/cloudStorage';// Assuming imported functions\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const VideoSearch=_ref=>{let{onVideoSelect}=_ref;const[query,setQuery]=useState({cameraName:'',keywords:'',page:1,pageSize:10});const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const handleSearch=async()=>{setLoading(true);try{const videos=await cloudStorage.searchVideos(query);setResults(videos);}catch(error){console.error('Search error:',error);// Handle error gracefully, e.g., display error message\n}finally{setLoading(false);}};const handlePageChange=async pageNumber=>{query.page=pageNumber;await handleSearch();};const handleCameraChange=value=>{query.cameraName=value;};// ... other event handlers for keywords, refinement, selection ...\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Videos\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Select,{placeholder:\"Select Camera\",value:query.cameraName,onChange:handleCameraChange}),/*#__PURE__*/_jsx(Input.Search,{placeholder:\"Enter Keywords\",value:query.keywords,onChange:e=>setQuery({...query,keywords:e.target.value})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Search\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),!loading&&results.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Pagination,{current:query.page,total:Math.ceil(results.length/query.pageSize),onChange:handlePageChange})}),!loading&&results.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No results found.\"})]});};export default VideoSearch;","map":{"version":3,"names":["React","useState","useEffect","Pagination","Select","Input","deleteFile","downloadFile","getCameraList","getPresignedUrl","getVideoList","listFiles","uploadFile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VideoSearch","_ref","onVideoSelect","query","setQuery","cameraName","keywords","page","pageSize","results","setResults","loading","setLoading","handleSearch","videos","cloudStorage","searchVideos","error","console","handlePageChange","pageNumber","handleCameraChange","value","children","placeholder","onChange","Search","e","target","onClick","length","current","total","Math","ceil"],"sources":["/workspace/cloud-storage-web-ui/src/components/VideoSearch.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Pagination, Select, Input } from 'antd'; // Example UI components\nimport {deleteFile, downloadFile, getCameraList, getPresignedUrl, getVideoList, listFiles, uploadFile} from '../utils/cloudStorage'; // Assuming imported functions\n\nconst VideoSearch = ({ onVideoSelect }) => {\n  const [query, setQuery] = useState({\n    cameraName: '',\n    keywords: '',\n    page: 1,\n    pageSize: 10,\n  });\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleSearch = async () => {\n    setLoading(true);\n    try {\n      const videos = await cloudStorage.searchVideos(query);\n      setResults(videos);\n    } catch (error) {\n      console.error('Search error:', error);\n      // Handle error gracefully, e.g., display error message\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePageChange = async (pageNumber) => {\n    query.page = pageNumber;\n    await handleSearch();\n  };\n\n  const handleCameraChange = (value) => {\n    query.cameraName = value;\n  };\n\n  // ... other event handlers for keywords, refinement, selection ...\n\n  return (\n    <div>\n      <h2>Search Videos</h2>\n      <div>\n        <Select placeholder=\"Select Camera\" value={query.cameraName} onChange={handleCameraChange}>\n          {/* Populate camera options from cloudStorage.getCameraList() */}\n        </Select>\n        <Input.Search placeholder=\"Enter Keywords\" value={query.keywords} onChange={(e) => setQuery({ ...query, keywords: e.target.value })} />\n        <button onClick={handleSearch}>Search</button>\n      </div>\n      {loading && <p>Loading...</p>}\n      {!loading && results.length > 0 && (\n        <>\n          {/* Display results as a list or grid, with thumbnails and metadata */}\n          <Pagination current={query.page} total={Math.ceil(results.length / query.pageSize)} onChange={handlePageChange} />\n        </>\n      )}\n      {!loading && results.length === 0 && <p>No results found.</p>}\n    </div>\n  );\n};\n\nexport default VideoSearch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}